class t{constructor(t){this.gridSize=t,this.squareSize=Math.sqrt(t),this.data=Array.from(Array(t),(()=>new Array(t).fill(0))),this.cells=Array.from(Array(t),(()=>new Array(t)));const e=document.getElementById("solve-button");e.removeAttribute("disabled");const i=document.getElementById("sudoku-grid");i.innerHTML="";const r=9===this.gridSize?/^[1-9]?$/:/^([1-9]|1[0-6])?$/;for(let t=0;t<this.gridSize;t++){const s=i.insertRow();for(let i=0;i<this.gridSize;i++){const n=s.insertCell();this.cells[t][i]=n,n.setAttribute("id",`cell-${t}-${i}`),n.setAttribute("contenteditable",""),0===t&&n.classList.add("border-top"),0===i&&n.classList.add("border-left"),t%this.squareSize==this.squareSize-1&&n.classList.add("border-bottom"),i%this.squareSize==this.squareSize-1&&n.classList.add("border-right"),n.innerHTML="<br>",n.addEventListener("input",(s=>{s.currentTarget.innerHTML.match(r)?(s.currentTarget.classList.remove("invalid"),this.data[t][i]=Number.parseInt(s.currentTarget.innerText.replace("\n",""))||0):s.currentTarget.classList.add("invalid"),document.querySelector(".invalid")?e.setAttribute("disabled",!0):e.removeAttribute("disabled")}))}}}lock(){for(let t=0;t<this.gridSize;t++)for(let e=0;e<this.gridSize;e++){const i=this.cells[t][e];i.innerHTML=`<b>${i.innerHTML}</b>`,i.removeAttribute("contenteditable")}}isValid(){for(let t=0;t<this.gridSize;t++)for(let e=0;e<this.gridSize;e++)if(0!==this.data[t][e]&&!this.isValidCell(t,e,this.data[t][e]))return!1;return!0}isValidCell(t,e,i){for(let r=0;r<this.gridSize;r++)if(r!==t&&this.data[r][e]===i)return!1;for(let r=0;r<this.gridSize;r++)if(r!==e&&this.data[t][r]===i)return!1;const r=this.squareSize*Math.floor(t/this.squareSize),s=this.squareSize*Math.floor(e/this.squareSize);for(let n=0;n<this.gridSize;n++){const o=r+Math.floor(n/this.squareSize),a=s+n%this.squareSize;if((o!==t||a!==e)&&this.data[o][a]===i)return!1}return!0}updateCell(t,e,i){this.data[t][e]=i,this.cells[t][e].innerHTML=`${i||""}<br>`}}const e=async t=>{for(let i=0;i<t.gridSize;i++)for(let r=0;r<t.gridSize;r++)if(0===t.data[i][r]){for(let s=1;s<=t.gridSize;s++)if(t.isValidCell(i,r,s)){if(t.updateCell(i,r,s),await new Promise((t=>setTimeout(t,50))),await e(t))return!0;t.updateCell(i,r,0)}return!1}return!0};var i=e;let r=0;class s{constructor(t,e,i){this.row=t,this.col=e,this.value=i}}class n{constructor(){this.id=r++,this.right=this,this.left=this,this.up=this,this.down=this}addRight(t){this.right=t,t.left=this}}class o extends n{constructor(t){super(),this.candidate=t}removeVertically(){this.up.down=this.down,this.down.up=this.up}returnVertically(){this.up.down=this,this.down.up=this}}class a extends n{constructor(){super(),this.size=0}addUp(t){this.size++,t.up=this.up,t.down=this,t.up.down=t,this.up=t,t.header=this}removeHorizontally(){this.left.right=this.right,this.right.left=this.left}returnHorizontally(){this.left.right=this,this.right.left=this}cover(){this.removeHorizontally();for(let t=this.down;t!==this;t=t.down)for(let e=t.right;e!==t;e=e.right)e.removeVertically(),e.header.size--}uncover(){this.returnHorizontally();for(let t=this.up;t!==this;t=t.up)for(let e=t.left;e!==t;e=e.left)e.returnVertically(),e.header.size++}}class l{constructor(t){this.grid=t,this.gridSize=t.gridSize,this.squareSize=t.squareSize;const e=4*Math.pow(this.gridSize,2);this.columns=Array.from(Array(e+1),(()=>new a)),this.header=this.columns[0];for(let t=0;t<=e;t++){const e=(t+1)%this.columns.length;this.columns[t].addRight(this.columns[e])}for(let t=0;t<this.gridSize;t++)for(let e=0;e<this.gridSize;e++)for(let i=1;i<=this.gridSize;i++){const r=new s(t,e,i),n=new o(r),a=new o(r),l=new o(r),h=new o(r);n.addRight(a),a.addRight(l),l.addRight(h),h.addRight(n),this.columns[this.positionConstraint(t,e)].addUp(n),this.columns[this.rowConstraint(t,i)].addUp(a),this.columns[this.columnConstraint(e,i)].addUp(l),this.columns[this.squareConstraint(t,e,i)].addUp(h)}for(let e=0;e<this.gridSize;e++)for(let i=0;i<this.gridSize;i++){const r=t.data[e][i];0!==r&&(this.columns[this.positionConstraint(e,i)].cover(),this.columns[this.rowConstraint(e,r)].cover(),this.columns[this.columnConstraint(i,r)].cover(),this.columns[this.squareConstraint(e,i,r)].cover())}}positionConstraint(t,e){return t*this.gridSize+e+1}rowConstraint(t,e){return Math.pow(this.gridSize,2)+t*this.gridSize+e}columnConstraint(t,e){return 2*Math.pow(this.gridSize,2)+t*this.gridSize+e}squareConstraint(t,e,i){const r=this.squareSize*Math.floor(t/this.squareSize),s=this.squareSize*Math.floor(e/this.squareSize),n=this.squareSize;return 3*Math.pow(this.gridSize,2)+(r*n+s)*n+i}async solve(){const t=this.selectColumn();if(null===t)return!0;t.cover();for(let e=t.down;e!==t;e=e.down){this.grid.updateCell(e.candidate.row,e.candidate.col,e.candidate.value);for(let t=e.right;t!==e;t=t.right)t.header.cover();if(await new Promise((t=>setTimeout(t,50))),await this.solve())return!0;for(let t=e.left;t!==e;t=t.left)t.header.uncover();this.grid.updateCell(e.candidate.row,e.candidate.col,0)}return t.uncover(),!1}selectColumn(){let t=1/0,e=null;for(let i=this.header.right;i!==this.header;i=i.right)i.size<t&&(e=i,t=i.size);return e}}var h=async t=>new l(t).solve();let d;const u=e=>{const i=parseInt(e.value,10),r=document.querySelector(":root").style;r.setProperty("--grid-size",432/i+"px"),r.setProperty("--font-size",`${Math.max(144/i,16)}px`),d=new t(i)};for(const t of document.getElementsByName("size"))t.checked&&u(t),t.addEventListener("change",(t=>{u(t.currentTarget)}));let c;document.getElementById("solve-button").addEventListener("click",(t=>{d.lock(),t.currentTarget.disabled=!0,document.querySelectorAll("input[type=radio]").forEach((t=>t.disabled=!0)),c=g[document.querySelector("input[type=radio][name=algorithm]:checked").value];const e=document.getElementById("status");d.isValid()?(e.innerHTML="Solving...",c(d).then((t=>{e.innerHTML=t?"Solved":"Cannot solve"}))):e.innerHTML="Cannot solve"}));const g={backtrack:i,dancingLinks:h};
//# sourceMappingURL=index.8ee54d31.js.map
